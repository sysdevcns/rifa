PROMPT PARA DESENVOLVIMENTO - SISTEMA DE RIFA/LOTERIA
CONTEXTO
VocÃª Ã© um desenvolvedor Python especializado em Streamlit e precisa criar um sistema completo de gerenciamento de rifas/loterias. O sistema deve ser robusto, seguro e fÃ¡cil de usar.
MISSÃƒO
Desenvolver uma aplicaÃ§Ã£o web usando Streamlit + Python + PostgreSQL hospedada no Railway para gerenciar rifas com nÃºmeros de 0-999, controle de usuÃ¡rios, pagamentos e relatÃ³rios detalhados.
ESPECIFICAÃ‡Ã•ES TÃ‰CNICAS
STACK TECNOLÃ“GICA

Frontend: Streamlit
Backend: Python 3.9+
Banco: PostgreSQL (Railway)
Bibliotecas: streamlit, psycopg2, pandas, hashlib, datetime

ARQUITETURA DO SISTEMA

AutenticaÃ§Ã£o: Sistema com 4 perfis (APOSTADOR, ASSISTENTE, ADMINISTRADOR, DESENVOLVEDOR)
Interface: Multi-pÃ¡ginas com navegaÃ§Ã£o baseada em permissÃµes
Banco: 7 tabelas principais com relacionamentos FK
SeguranÃ§a: Hash de senhas, controle de sessÃ£o, validaÃ§Ã£o de inputs

FUNCIONALIDADES POR MÃ“DULO
ğŸ” MÃ“DULO DE AUTENTICAÃ‡ÃƒO
python# Implementar:
- Login/logout com sessÃ£o persistente
- Hash de senhas (bcrypt/hashlib)
- Middleware de autorizaÃ§Ã£o por perfil
- Redirecionamento baseado em permissÃµes
ğŸ‘¥ GESTÃƒO DE USUÃRIOS E APOSTADORES
python# CRUD Apostadores com campos:
nome, apelido*, ddd, telefone, email, endereco, status
# *apelido deve ser Ãºnico e obrigatÃ³rio
ğŸ² SISTEMA DE EVENTOS E JOGOS
python# Grid 25x40 (1000 nÃºmeros: 0-999)
# Estados: DISPONÃVEL(azul), RESERVADO(amarelo), VENDIDO(vermelho)
# Click interativo para reservar/liberar nÃºmeros
# ValidaÃ§Ã£o: 1 evento ativo por vez
ğŸ’° CONTROLE DE PAGAMENTOS
python# Status: PENDENTE â†’ QUITADO
# IntegraÃ§Ã£o com reservas de nÃºmeros
# HistÃ³rico completo de transaÃ§Ãµes
ğŸ”§ JOGOS FIXOS
python# NÃºmeros automÃ¡ticos por apostador
# ValidaÃ§Ã£o: sem duplicatas (0-999 Ãºnicos)
# Auto-reserva ao criar novo evento
ğŸ“Š RELATÃ“RIOS
python# Grid 10x100 com cÃ©lulas compostas
# Estrutura: [Apelido][Status][PremiaÃ§Ã£o]
#           [NÃºmero][Pagamento][Resultado]
# Export para WhatsApp com validaÃ§Ã£o de contato
REGRAS DE NEGÃ“CIO CRÃTICAS
âš ï¸ VALIDAÃ‡Ã•ES OBRIGATÃ“RIAS

Evento Ãºnico: NÃ£o permitir novo evento se existir ativo
NÃºmeros fixos: Auto-reservar ao criar evento
Unicidade: Apelidos Ãºnicos, nÃºmeros fixos sem duplicata
Status flow: DISPONÃVEL â†’ RESERVADO â†’ VENDIDO (irreversÃ­vel)
PermissÃµes: Acesso rigoroso baseado no perfil do usuÃ¡rio

ğŸ”„ FLUXO PRINCIPAL
1. Admin cria evento â†’ Reserva automÃ¡tica de nÃºmeros fixos
2. Apostador seleciona nÃºmeros â†’ Status RESERVADO  
3. Assistente confirma pagamento â†’ Status VENDIDO
4. Admin finaliza evento â†’ RelatÃ³rio final + liberaÃ§Ã£o para novo evento
ESTRUTURA DE PASTAS SUGERIDA
projeto_rifa/
â”œâ”€â”€ app.py                 # App principal Streamlit
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ database.py        # ConexÃ£o PostgreSQL
â”‚   â””â”€â”€ settings.py        # ConfiguraÃ§Ãµes gerais
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ usuarios.py        # CRUD usuÃ¡rios
â”‚   â”œâ”€â”€ apostadores.py     # CRUD apostadores  
â”‚   â”œâ”€â”€ eventos.py         # CRUD eventos
â”‚   â”œâ”€â”€ jogos.py          # CRUD jogos/nÃºmeros
â”‚   â””â”€â”€ pagamentos.py      # CRUD pagamentos
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ auth.py           # Sistema autenticaÃ§Ã£o
â”‚   â”œâ”€â”€ validators.py     # ValidaÃ§Ãµes
â”‚   â””â”€â”€ whatsapp.py       # IntegraÃ§Ã£o WhatsApp
â””â”€â”€ pages/
    â”œâ”€â”€ login.py          # Tela de login
    â”œâ”€â”€ dashboard.py      # Dashboard por perfil
    â”œâ”€â”€ apostadores.py    # GestÃ£o apostadores
    â”œâ”€â”€ eventos.py        # GestÃ£o eventos
    â”œâ”€â”€ jogos.py         # Grid de seleÃ§Ã£o
    â”œâ”€â”€ pagamentos.py    # Controle financeiro
    â””â”€â”€ relatorios.py    # RelatÃ³rios e exports
DELIVERABLES ESPERADOS
ğŸ“‹ FASE 1: ESTRUTURA BASE

 ConexÃ£o com PostgreSQL (Railway)
 Sistema de autenticaÃ§Ã£o completo
 CRUD bÃ¡sico de todas as tabelas
 Interface Streamlit navegÃ¡vel

ğŸ“‹ FASE 2: FUNCIONALIDADES CORE

 Grid interativo de seleÃ§Ã£o (25x40)
 Sistema de reservas com validaÃ§Ãµes
 Controle de eventos e status
 Jogos fixos com auto-reserva

ğŸ“‹ FASE 3: RELATÃ“RIOS E INTEGRAÃ‡ÃƒO

 RelatÃ³rio "Jogos Realizados" (10x100)
 IntegraÃ§Ã£o WhatsApp
 ValidaÃ§Ãµes de negÃ³cio completas
 Testes e deploy no Railway

CRITÃ‰RIOS DE QUALIDADE

âœ… Usabilidade: Interface intuitiva e responsiva
âœ… Performance: Carregamento rÃ¡pido do grid 1000 nÃºmeros
âœ… SeguranÃ§a: Controle de acesso rigoroso
âœ… Confiabilidade: ValidaÃ§Ãµes e tratamento de erros
âœ… Manutenibilidade: CÃ³digo limpo e documentado

INSTRUÃ‡Ã•ES ESPECÃFICAS

Use session_state do Streamlit para controle de estado
Implemente conexÃ£o pooling para o banco
Crie componentes reutilizÃ¡veis para o grid
Adicione logs de auditoria para operaÃ§Ãµes crÃ­ticas
Valide todos os inputs antes de persistir no banco


OBJETIVO FINAL: Sistema funcional, seguro e escalÃ¡vel para gerenciar rifas/loterias com interface profissional e controle completo do negÃ³cio.
PRAZO SUGERIDO: 2-3 semanas para MVP completo
PRÃ“XIMOS PASSOS: ComeÃ§ar pela estrutura do banco + autenticaÃ§Ã£o + CRUD bÃ¡sico